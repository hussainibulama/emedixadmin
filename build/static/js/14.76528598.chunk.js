(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[14],{309:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(3);t.a=function(e){return r.a.createElement("div",{className:"errormessage"},r.a.createElement(s.Grid,null,r.a.createElement(s.Cell,{col:2},r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"errcircle"},"!"))),r.a.createElement(s.Cell,{col:10},r.a.createElement("p",null,e.msg))))}},310:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(3),l=a(15),o=a(22);t.a=function(e){return r.a.createElement("div",{className:"goodmessage"},r.a.createElement(s.Grid,null,r.a.createElement(s.Cell,{col:2},r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"goodcircle"},r.a.createElement(l.a,{icon:o.f})))),r.a.createElement(s.Cell,{col:10},r.a.createElement("p",null,e.msg))))}},317:function(e,t,a){"use strict";var n=a(4),r=a(5),s=a(7),l=a(2),o=a.n(l),c=a(0),i=a.n(c),m=a(19),u=function(e){function t(){return e.apply(this,arguments)||this}return Object(s.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.bsPrefix,a=e.className,s=e.striped,l=e.bordered,c=e.hover,m=e.size,u=e.variant,d=e.responsive,h=Object(r.a)(e,["bsPrefix","className","striped","bordered","hover","size","variant","responsive"]),p=o()(t,a,u&&t+"-"+u,m&&t+"-"+m,s&&t+"-striped",l&&t+"-bordered",c&&t+"-hover"),g=i.a.createElement("table",Object(n.a)({},h,{className:p}));if(d){var b=t+"-responsive";return"string"===typeof d&&(b=b+"-"+d),i.a.createElement("div",{className:b},g)}return g},t}(i.a.Component);t.a=Object(m.a)(u,"table")},325:function(e,t,a){"use strict";var n=a(4),r=a(5),s=a(7),l=a(2),o=a.n(l),c=a(0),i=a.n(c),m=a(19),u=function(e){function t(){return e.apply(this,arguments)||this}return Object(s.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.bsPrefix,a=e.noGutters,s=e.as,l=e.className,c=Object(r.a)(e,["bsPrefix","noGutters","as","className"]);return i.a.createElement(s,Object(n.a)({},c,{className:o()(l,t,a&&"no-gutters")}))},t}(i.a.Component);u.defaultProps={as:"div",noGutters:!1},t.a=Object(m.a)(u,"row")},327:function(e,t,a){"use strict";var n=a(4),r=a(5),s=a(7),l=a(2),o=a.n(l),c=a(0),i=a.n(c),m=a(19),u=a(90),d=function(e){return i.a.forwardRef((function(t,a){return i.a.createElement("div",Object(n.a)({},t,{ref:a,className:o()(t.className,e)}))}))},h=i.a.createContext(null),p=function(e){function t(){return e.apply(this,arguments)||this}return Object(s.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.bsPrefix,a=e.className,s=e.variant,l=e.as,c=Object(r.a)(e,["bsPrefix","className","variant","as"]),m=s?t+"-"+s:t;return i.a.createElement(l,Object(n.a)({className:o()(m,a)},c))},t}(i.a.Component);p.defaultProps={as:"img",variant:null};var g=Object(m.a)(p,"card-img"),b=Object(u.a)("card-body"),v=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={},t}return Object(s.a)(t,e),t.getDerivedStateFromProps=function(e){return{cardContext:{cardHeaderBsPrefix:e.bsPrefix+"-header"}}},t.prototype.render=function(){var e=this.props,t=e.bsPrefix,a=e.className,s=e.as,l=e.bg,c=e.text,m=e.border,u=e.body,d=e.children,p=Object(r.a)(e,["bsPrefix","className","as","bg","text","border","body","children"]),g=o()(a,t,l&&"bg-"+l,c&&"text-"+c,m&&"border-"+m);return i.a.createElement(h.Provider,{value:this.state.cardContext},i.a.createElement(s,Object(n.a)({className:g},p),u?i.a.createElement(b,null,d):d))},t}(i.a.Component);v.defaultProps={as:"div",body:!1};var f=d("h5"),E=d("h6"),S=Object(m.a)(v,"card");S.Img=g,S.Title=Object(u.a)("card-title",{Component:f}),S.Subtitle=Object(u.a)("card-subtitle",{Component:E}),S.Body=b,S.Link=Object(u.a)("card-link",{Component:"a"}),S.Text=Object(u.a)("card-text",{Component:"p"}),S.Header=Object(u.a)("card-header"),S.Footer=Object(u.a)("card-footer"),S.ImgOverlay=Object(u.a)("card-img-overlay");t.a=S},551:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a.n(n),s=a(27),l=a(40),o=a(8),c=a(9),i=a(11),m=a(10),u=a(12),d=a(0),h=a.n(d),p=a(325),g=a(134),b=a(327),v=a(317),f=a(15),E=a(22),S=a(69),x=a(14),y=a(89),w=a(309),_=a(310),k=a(33),C=a(307),j=function(e){var t={display:e.displayModal?"block":"none"};function a(t){t.stopPropagation(),e.closeModal()}return h.a.createElement("div",{className:"modal",onClick:a,style:t}," ",h.a.createElement("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()}}," ",h.a.createElement("span",{className:"close",onClick:a},"\xd7")," ",h.a.createElement("div",{className:"contentent",style:{margin:"0 auto",width:"60%"}},h.a.createElement("p",{style:{color:"#000000"}}," ",e.message),h.a.createElement(C.a,{onSubmit:e.onSubmit},h.a.createElement(C.a.Group,{controlId:"formBasicEmail"},h.a.createElement(C.a.Label,null,e.doing),h.a.createElement(C.a.Control,{type:"password",pattern:"[0-9]{4}",size:"4",required:!0,name:"store_wallet_pin",value:e.store_wallet_pin?e.store_wallet_pin:"",onChange:e.onChange,placeholder:"e.g 1971"})),h.a.createElement(S.a,{disabled:e.loading,name:"Login",onClick:e.onClick,value:h.a.createElement(h.a.Fragment,null,e.loading&&h.a.createElement(f.a,{style:{position:"relative",top:"0px"},icon:E.x,spin:!0})," ",!e.loading&&h.a.createElement(h.a.Fragment,null," ",e.value))}))))," ")},N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).selectModal=function(e){a.setState({modal:!a.state.modal})},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value;a.setState(Object(l.a)({},n,r))},a.state={balance:"",results:[],pin:null,pinno:"",store_wallet_pin:"",loading:!1,loader:!1,confirm:"",message:"",modal:!1,error:!1,errmsg:null,good:!1,gmsg:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"UpdatePin",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),""===this.state.store_Wallet_pin){e.next=18;break}return e.prev=2,t=localStorage.getItem("store_id"),e.next=6,k.a.post("/updatepin",{store_id:t,store_wallet_pin:this.state.store_wallet_pin});case 6:return a=e.sent,e.next=9,a.data;case 9:(n=e.sent)&&n.success?(this.setState({loading:!1}),this.setState({gmsg:n.msg}),this.setState({good:!0}),this.setState({error:!1}),this.setState({modal:!1})):(this.setState({loading:!1}),this.setState({errmsg:n.msg}),this.setState({error:!0}),this.setState({good:!1}),this.setState({modal:!1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:e.next=23;break;case 18:this.setState({loading:!1}),this.setState({errmsg:"Please Fill out your form Correctly"}),this.setState({error:!0}),this.setState({good:!1}),this.setState({modal:!1});case 23:case"end":return e.stop()}}),e,this,[[2,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"Widthdraw",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,a,n,s,l,o,c,i,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),""===this.state.store_Wallet_pin){e.next=74;break}if(this.state.pinno!==this.state.store_wallet_pin){e.next=67;break}if("0"===this.state.balance){e.next=60;break}return e.prev=4,t=localStorage.getItem("store_id"),e.next=8,k.a.post("/withdraw",{store_id:t,amount:this.state.balance,store_wallet_pin:this.state.store_wallet_pin,username:localStorage.getItem("username")});case 8:return a=e.sent,e.next=11,a.data;case 11:if(!(n=e.sent)||!n.success){e.next=48;break}return this.setState({loading:!1}),this.setState({gmsg:n.msg}),this.setState({good:!0}),this.setState({error:!1}),this.setState({modal:!1}),e.prev=18,s=localStorage.getItem("store_id"),e.next=22,k.a.post("/walletbalance",{store_id:s});case 22:return l=e.sent,e.next=25,l.data;case 25:(o=e.sent)&&o.success&&(""===o.wallet?this.setState({balance:"0"}):this.setState({balance:o.wallet})),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(18),console.log(e.t0);case 32:return e.prev=32,c=localStorage.getItem("store_id"),e.next=36,k.a.post("/withdrawhistory",{store_id:c});case 36:return i=e.sent,e.next=39,i.data;case 39:m=e.sent,this.setState({results:m}),e.next=46;break;case 43:e.prev=43,e.t1=e.catch(32),console.log(e.t1);case 46:e.next=53;break;case 48:this.setState({loading:!1}),this.setState({errmsg:n.msg}),this.setState({error:!0}),this.setState({good:!1}),this.setState({modal:!1});case 53:e.next=58;break;case 55:e.prev=55,e.t2=e.catch(4),console.log(e.t2);case 58:e.next=65;break;case 60:this.setState({loading:!1}),this.setState({errmsg:"You cannot withdraw an empty account"}),this.setState({error:!0}),this.setState({good:!1}),this.setState({modal:!1});case 65:e.next=72;break;case 67:this.setState({loading:!1}),this.setState({errmsg:"Invalid Pin"}),this.setState({error:!0}),this.setState({good:!1}),this.setState({modal:!1});case 72:e.next=79;break;case 74:this.setState({loading:!1}),this.setState({errmsg:"Please Fill out your form Correctly"}),this.setState({error:!0}),this.setState({good:!1}),this.setState({modal:!1});case 79:case"end":return e.stop()}}),e,this,[[4,55],[18,29],[32,43]])})));return function(){return e.apply(this,arguments)}}()},{key:"checkButton",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loader:!0}),e.prev=1,t=localStorage.getItem("store_id"),e.next=5,k.a.post("/checkpin",{store_id:t});case 5:return a=e.sent,e.next=8,a.data;case 8:(n=e.sent)&&n.success&&(null===n.pin?this.setState({pin:!1,pinno:n.pin,modal:!0,message:"Your first time huh!, please create a 4 digit pin to continue",loader:!1}):this.setState({pin:!0,pinno:n.pin,modal:!0,message:"Enter your pin to withdraw",loader:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,a,n,s,l,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("store_id"),e.next=4,k.a.post("/walletbalance",{store_id:t});case 4:return a=e.sent,e.next=7,a.data;case 7:(n=e.sent)&&n.success&&(null==n.wallet?this.setState({balance:"0"}):this.setState({balance:n.wallet})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:return e.prev=14,s=localStorage.getItem("store_id"),e.next=18,k.a.post("/withdrawhistory",{store_id:s});case 18:return l=e.sent,e.next=21,l.data;case 21:o=e.sent,this.setState({results:o}),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(14),console.log(e.t1);case 28:case"end":return e.stop()}}),e,this,[[0,11],[14,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.balance,n=t.modal,r=t.pin,s=t.error,l=t.errmsg,o=t.good,c=t.gmsg,i=t.loader;return null===localStorage.getItem("store_id")?h.a.createElement(x.a,{to:"/auth/signin"}):h.a.createElement(y.a,null,h.a.createElement(p.a,null,h.a.createElement(g.a,null,h.a.createElement(b.a,null,h.a.createElement(b.a.Header,null,h.a.createElement(b.a.Title,{as:"h5"},"Wallet "),h.a.createElement("span",{className:"d-block m-t-5"})),s&&h.a.createElement(w.a,{msg:l}),o&&h.a.createElement(_.a,{msg:c}),h.a.createElement(b.a,null,h.a.createElement(b.a.Body,null,h.a.createElement("div",{className:"decenter"},h.a.createElement("h6",{className:"mb-4",style:{marginLeft:"6px"}}," ","Wallet Balance"),h.a.createElement("div",{className:"row d-flex align-items-center"},h.a.createElement("div",{className:"col-9"},h.a.createElement("h3",{className:"f-w-300 d-flex align-items-center m-b-0"},"NGN"," ",a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))),h.a.createElement("div",{className:"withdraw",style:{position:"relative",right:"0",justifyContent:"right"}},h.a.createElement(S.a,{name:"Login",value:h.a.createElement(h.a.Fragment,null,i&&h.a.createElement(f.a,{style:{position:"relative",top:"0px"},icon:E.x,spin:!0})," ",!i&&h.a.createElement(h.a.Fragment,null," Withdraw")),onClick:function(){return e.checkButton()},placeholder:"Enter your name",handleChange:this.handleFullName}),n&&r&&h.a.createElement(j,{loading:this.state.loading,value:"Withdraw",onClick:function(){return e.Widthdraw()},displayModal:this.state.modal,closeModal:this.selectModal,onChange:this.handleChange,onSubmit:this.handleSubmit,store_wallet_pin:this.state.store_wallet_pin,message:this.state.message}),n&&!r&&h.a.createElement(j,{onClick:function(){return e.UpdatePin()},loading:this.state.loading,onChange:this.handleChange,onSubmit:this.handleSubmit,value:"Create Pin",store_wallet_pin:this.state.store_wallet_pin,displayModal:this.state.modal,closeModal:this.selectModal,message:this.state.message})))))),h.a.createElement(b.a.Header,null,h.a.createElement(b.a.Title,{as:"h5"},"Withdraw History ")),h.a.createElement(b.a.Body,null,h.a.createElement(v.a,{responsive:!0,hover:!0},h.a.createElement("thead",null,h.a.createElement("tr",null,h.a.createElement("th",null,"#"),h.a.createElement("th",null,"Amount"),h.a.createElement("th",null,"By User"),h.a.createElement("th",null,"Account Info"),h.a.createElement("th",null,"Account No"),h.a.createElement("th",null,"Date and Time"))),h.a.createElement("tbody",null,this.state.results.map((function(e,t){return h.a.createElement("tr",null,h.a.createElement("th",{scope:"row"},t+1),h.a.createElement("td",null,e.amount),h.a.createElement("td",null,e.username),h.a.createElement("td",null,e.acc_info),h.a.createElement("td",null,e.acc_no),h.a.createElement("td",null,e.datetime))})))))))))}}]),t}(h.a.Component);document.title="Wallet | "+localStorage.getItem("username");t.default=N}}]);
//# sourceMappingURL=14.76528598.chunk.js.map